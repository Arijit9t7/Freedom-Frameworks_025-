<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
</head>
<body>
    <h1>Login Form</h1>
    <form>
        <input id="username" placeholder="username" >
        <input id="userPass" placeholder="password" >
        <input type="submit">
    </form>
        
    
    <script>
    
        let form = document.querySelector("form")
        
        const handleFormSubmit = (e)=>{
            // e = event
           e.preventDefault()
    
           let username = document.getElementById("username").value
           let userpass = document.getElementById("userPass").value
        
          fetch("http://localhost:3000/users")
          .then((res)=>res.json())
          .then((res)=>{
              let narr = res.filter((ele)=>{
                  return ele.username == username && ele.userpass == userpass
              })
    
              if(narr.length == 0){
                alert("Please register first .")
              }else{
                alert("login successful")
                localStorage.setItem("isLogged" , JSON.stringify({id:narr[0].id , username , wishlist : narr[0].wishlist }))
                window.location.href = "../index.html"
              }
          })
        }
    
    
    
        form.addEventListener('submit' , (event)=>handleFormSubmit(event))
    
    </script>
</body>
</html>